generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-arm64-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String      @id @default(cuid())
  email              String      @unique
  name               String?
  googleAccessToken  String?
  googleRefreshToken String?
  googleCustomerId   String?
  metaAccessToken    String?
  metaRefreshToken   String?
  metaAdAccountId    String?
  metaBusinessId     String?
  metaPageId         String?  
  campaigns          Campaign[]
  createdAt          DateTime    @default(now())
  updatedAt          DateTime?   @updatedAt
}

model Campaign {
  id                 String        @id @default(cuid())
  userId             String
  user               User          @relation(fields: [userId], references: [id])

  // ===== General Info =====
  name               String
  description        String
  image              String?
  headline           String
  longHeadline       String?
  adDescription      String
  audience           String
  objective          String
  budgetSuggestion   String?
  callToAction       String
  keywords           String
  conversionCategory String?
  conversionValue    Float?
  budget             Float?
  biddingStrategy    String?
  businessName       String?
  youtubeVideoUrl    String?
  status             String      @default("DRAFT")
  placements         Json?

  // ===== Relations =====
  google             GoogleCampaign?
  meta               MetaCampaign?

  createdAt          DateTime    @default(now())
  updatedAt          DateTime?   @updatedAt
}

model GoogleCampaign {
  id             String    @id @default(cuid())
  campaignId     String    @unique
  budgetId       String?
  campaign       Campaign  @relation(fields: [campaignId], references: [id])
}

model MetaCampaign {
  id                  String    @id @default(cuid())
  campaignId          String    @unique
  adSetId             String?
  adId                String?
  specialAdCategories String    @default("NONE")
  campaign            Campaign  @relation(fields: [campaignId], references: [id])
}
